!function(n){var t={};function l(e){if(t[e])return t[e].exports;var c=t[e]={i:e,l:!1,exports:{}};return n[e].call(c.exports,c,c.exports,l),c.l=!0,c.exports}l.m=n,l.c=t,l.d=function(n,t,e){l.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},l.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},l.t=function(n,t){if(1&t&&(n=l(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(l.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var c in n)l.d(e,c,function(t){return n[t]}.bind(null,c));return e},l.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return l.d(t,"a",t),t},l.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},l.p="",l(l.s=1)}([function(module,exports){eval("module.exports = {\n  trimStr: (string) => string.replace(/^\\s+|\\s+$/g, '')\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9oZWxwZXJzLmpzP2Q3YzIiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSB7XG4gIHRyaW1TdHI6IChzdHJpbmcpID0+IHN0cmluZy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJylcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n")},function(module,exports,__webpack_require__){eval("const {constructRule, runRule} = __webpack_require__(2);\nconst {constructValidator, runValidator} = __webpack_require__(3);\n\nconst Keywords = {\n  FIELD: 'field',\n  RULE: 'rule',\n  VALIDATOR: 'validator'\n};\n\nconst parseDeclarations = (content) => {\n  let tokensRegex = /([a-z]+) ([a-zA-Z0-9]+)(:([a-zA-Z0-9]+))?( \\= \\[(([^\\]]|(\\\\\\]))+)\\])?;/g;\n\n  const tokensCollection = [];\n\n  const copiedScript = content;\n\n  copiedScript.replace(tokensRegex, function (...matches) {\n    tokensCollection.push({\n      keyword: matches[1],\n      name: matches[2],\n      body: matches[6]\n    });\n  });\n\n  return tokensCollection;\n}\n\n\nclass Vql {\n  constructor(script, fieldMapping) {\n    this.active = false;\n    this.fieldMapping = fieldMapping;\n\n    this.getScript(script)\n      .then((content) => {\n        this.tokens = parseDeclarations(content);\n        this.bindFields();\n        this.bindRules();\n        this.bindValidators();\n\n        this.active = true;\n      })\n  }\n\n  bindFields() {\n    this.fields = this.tokens.filter(el => el.keyword === Keywords.FIELD)\n        .map(el => ({\n          name: el.name,\n          element: this.fieldMapping[el.name]\n        }));\n  }\n\n  bindRules() {\n    this.rules = this.tokens.filter(el => el.keyword === Keywords.RULE)\n        .map(el => ({\n          name: el.name,\n          lines: constructRule(el.body)\n        }));\n  }\n\n  bindValidators() {\n    this.validators = this.tokens.filter(el => el.keyword === Keywords.VALIDATOR)\n        .map(el => ({\n          name: el.name,\n          lines: constructValidator(this.rules, el.body)\n        }));\n  }\n\n  run(validator) {\n    const rules = runValidator(this.validators, validator);\n\n    const results = rules.map(({ruleToRun, fieldName}) => {\n      const inputValue = this.fields.find(field => field.name === fieldName).value;\n\n      return runRule( inputValue, this.rules, this.rules.find(rule => rule.name === ruleToRun) );\n    });\n  }\n\n  getScript(script) {\n    return fetch(script).then((response) => response.text());\n  }\n}\n\nwindow.Vql = Vql;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9pbnRlcnByZXRlci5qcz81Mzc2Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHtjb25zdHJ1Y3RSdWxlLCBydW5SdWxlfSA9IHJlcXVpcmUoJy4vcnVsZXMnKTtcbmNvbnN0IHtjb25zdHJ1Y3RWYWxpZGF0b3IsIHJ1blZhbGlkYXRvcn0gPSByZXF1aXJlKCcuL3ZhbGlkYXRvcnMnKTtcblxuY29uc3QgS2V5d29yZHMgPSB7XG4gIEZJRUxEOiAnZmllbGQnLFxuICBSVUxFOiAncnVsZScsXG4gIFZBTElEQVRPUjogJ3ZhbGlkYXRvcidcbn07XG5cbmNvbnN0IHBhcnNlRGVjbGFyYXRpb25zID0gKGNvbnRlbnQpID0+IHtcbiAgbGV0IHRva2Vuc1JlZ2V4ID0gLyhbYS16XSspIChbYS16QS1aMC05XSspKDooW2EtekEtWjAtOV0rKSk/KCBcXD0gXFxbKChbXlxcXV18KFxcXFxcXF0pKSspXFxdKT87L2c7XG5cbiAgY29uc3QgdG9rZW5zQ29sbGVjdGlvbiA9IFtdO1xuXG4gIGNvbnN0IGNvcGllZFNjcmlwdCA9IGNvbnRlbnQ7XG5cbiAgY29waWVkU2NyaXB0LnJlcGxhY2UodG9rZW5zUmVnZXgsIGZ1bmN0aW9uICguLi5tYXRjaGVzKSB7XG4gICAgdG9rZW5zQ29sbGVjdGlvbi5wdXNoKHtcbiAgICAgIGtleXdvcmQ6IG1hdGNoZXNbMV0sXG4gICAgICBuYW1lOiBtYXRjaGVzWzJdLFxuICAgICAgYm9keTogbWF0Y2hlc1s2XVxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gdG9rZW5zQ29sbGVjdGlvbjtcbn1cblxuXG5jbGFzcyBWcWwge1xuICBjb25zdHJ1Y3RvcihzY3JpcHQsIGZpZWxkTWFwcGluZykge1xuICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5maWVsZE1hcHBpbmcgPSBmaWVsZE1hcHBpbmc7XG5cbiAgICB0aGlzLmdldFNjcmlwdChzY3JpcHQpXG4gICAgICAudGhlbigoY29udGVudCkgPT4ge1xuICAgICAgICB0aGlzLnRva2VucyA9IHBhcnNlRGVjbGFyYXRpb25zKGNvbnRlbnQpO1xuICAgICAgICB0aGlzLmJpbmRGaWVsZHMoKTtcbiAgICAgICAgdGhpcy5iaW5kUnVsZXMoKTtcbiAgICAgICAgdGhpcy5iaW5kVmFsaWRhdG9ycygpO1xuXG4gICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgICAgIH0pXG4gIH1cblxuICBiaW5kRmllbGRzKCkge1xuICAgIHRoaXMuZmllbGRzID0gdGhpcy50b2tlbnMuZmlsdGVyKGVsID0+IGVsLmtleXdvcmQgPT09IEtleXdvcmRzLkZJRUxEKVxuICAgICAgICAubWFwKGVsID0+ICh7XG4gICAgICAgICAgbmFtZTogZWwubmFtZSxcbiAgICAgICAgICBlbGVtZW50OiB0aGlzLmZpZWxkTWFwcGluZ1tlbC5uYW1lXVxuICAgICAgICB9KSk7XG4gIH1cblxuICBiaW5kUnVsZXMoKSB7XG4gICAgdGhpcy5ydWxlcyA9IHRoaXMudG9rZW5zLmZpbHRlcihlbCA9PiBlbC5rZXl3b3JkID09PSBLZXl3b3Jkcy5SVUxFKVxuICAgICAgICAubWFwKGVsID0+ICh7XG4gICAgICAgICAgbmFtZTogZWwubmFtZSxcbiAgICAgICAgICBsaW5lczogY29uc3RydWN0UnVsZShlbC5ib2R5KVxuICAgICAgICB9KSk7XG4gIH1cblxuICBiaW5kVmFsaWRhdG9ycygpIHtcbiAgICB0aGlzLnZhbGlkYXRvcnMgPSB0aGlzLnRva2Vucy5maWx0ZXIoZWwgPT4gZWwua2V5d29yZCA9PT0gS2V5d29yZHMuVkFMSURBVE9SKVxuICAgICAgICAubWFwKGVsID0+ICh7XG4gICAgICAgICAgbmFtZTogZWwubmFtZSxcbiAgICAgICAgICBsaW5lczogY29uc3RydWN0VmFsaWRhdG9yKHRoaXMucnVsZXMsIGVsLmJvZHkpXG4gICAgICAgIH0pKTtcbiAgfVxuXG4gIHJ1bih2YWxpZGF0b3IpIHtcbiAgICBjb25zdCBydWxlcyA9IHJ1blZhbGlkYXRvcih0aGlzLnZhbGlkYXRvcnMsIHZhbGlkYXRvcik7XG5cbiAgICBjb25zdCByZXN1bHRzID0gcnVsZXMubWFwKCh7cnVsZVRvUnVuLCBmaWVsZE5hbWV9KSA9PiB7XG4gICAgICBjb25zdCBpbnB1dFZhbHVlID0gdGhpcy5maWVsZHMuZmluZChmaWVsZCA9PiBmaWVsZC5uYW1lID09PSBmaWVsZE5hbWUpLnZhbHVlO1xuXG4gICAgICByZXR1cm4gcnVuUnVsZSggaW5wdXRWYWx1ZSwgdGhpcy5ydWxlcywgdGhpcy5ydWxlcy5maW5kKHJ1bGUgPT4gcnVsZS5uYW1lID09PSBydWxlVG9SdW4pICk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRTY3JpcHQoc2NyaXB0KSB7XG4gICAgcmV0dXJuIGZldGNoKHNjcmlwdCkudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLnRleHQoKSk7XG4gIH1cbn1cblxud2luZG93LlZxbCA9IFZxbDtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n")},function(module,exports,__webpack_require__){eval("const {trimStr} = __webpack_require__(0);\n\nconst Tests = {\n  BETWEEN: 1,\n  EQUAL: 2,\n  MATCH: 3,\n  PASS: 4\n};\n\nconst TestsRegex = {\n  [Tests.BETWEEN]: /value in \\<(\\d+), (\\d+)\\>/,\n  [Tests.EQUAL]: /value = (\\d+)/,\n  [Tests.MATCH]: /value match ([^\\n]+)/,\n  [Tests.PASS]: /value pass ([a-zA-Z0-9]+)/\n};\n\nconst TestsFunctions = {\n  [Tests.BETWEEN]: (val, from, to) => val >= from && val <= to,\n  [Tests.EQUAL]: (val, assert) => val === assert,\n  [Tests.MATCH]: (val, match) => val.test(match),\n  [Tests.PASS]: (val, ruleToCall) => ruleToCall(val)\n};\n\nconst constructRule = (body) => {\n  const rules = trimStr(body).split('\\n');\n  return rules.map(rule => {\n    const testIdToRun = Object.values(Tests).find(\n      testId => TestsRegex[testId].test(rule)\n    );\n\n    if (!testIdToRun) {\n      throw 'Unknown tester: ' + rule;\n    }\n\n    return {\n      testIdToRun,\n      params: rule.match(TestsRegex[testIdToRun]).splice(1)\n    }\n  });\n}\n\nconst runRule = (inputValue, rules, rule, depth = 0) => {\n  if (depth === 10) {\n    throw 'Rule execution loop detected. Interrupting';\n  }\n\n  if (rule.testIdToRun === Tests.PASS) {\n    const ruleToRunBefore = rules.find(rule => rule.name === rule.params[0]);\n\n    if (!ruleToRunBefore) {\n      throw 'Rule not found: ' + rule.param[0];\n    }\n\n    return runRule(inputValue, rules, ruleToRunBefore, depth++)\n  }\n\n  return rule.lines(line => TestsFunctions[line.testIdToRun](inputValue, ...line.params));\n}\n\nmodule.exports = {\n  constructRule,\n  runRule\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ydWxlcy5qcz9kNGE5Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHt0cmltU3RyfSA9IHJlcXVpcmUoJy4vaGVscGVycycpO1xuXG5jb25zdCBUZXN0cyA9IHtcbiAgQkVUV0VFTjogMSxcbiAgRVFVQUw6IDIsXG4gIE1BVENIOiAzLFxuICBQQVNTOiA0XG59O1xuXG5jb25zdCBUZXN0c1JlZ2V4ID0ge1xuICBbVGVzdHMuQkVUV0VFTl06IC92YWx1ZSBpbiBcXDwoXFxkKyksIChcXGQrKVxcPi8sXG4gIFtUZXN0cy5FUVVBTF06IC92YWx1ZSA9IChcXGQrKS8sXG4gIFtUZXN0cy5NQVRDSF06IC92YWx1ZSBtYXRjaCAoW15cXG5dKykvLFxuICBbVGVzdHMuUEFTU106IC92YWx1ZSBwYXNzIChbYS16QS1aMC05XSspL1xufTtcblxuY29uc3QgVGVzdHNGdW5jdGlvbnMgPSB7XG4gIFtUZXN0cy5CRVRXRUVOXTogKHZhbCwgZnJvbSwgdG8pID0+IHZhbCA+PSBmcm9tICYmIHZhbCA8PSB0byxcbiAgW1Rlc3RzLkVRVUFMXTogKHZhbCwgYXNzZXJ0KSA9PiB2YWwgPT09IGFzc2VydCxcbiAgW1Rlc3RzLk1BVENIXTogKHZhbCwgbWF0Y2gpID0+IHZhbC50ZXN0KG1hdGNoKSxcbiAgW1Rlc3RzLlBBU1NdOiAodmFsLCBydWxlVG9DYWxsKSA9PiBydWxlVG9DYWxsKHZhbClcbn07XG5cbmNvbnN0IGNvbnN0cnVjdFJ1bGUgPSAoYm9keSkgPT4ge1xuICBjb25zdCBydWxlcyA9IHRyaW1TdHIoYm9keSkuc3BsaXQoJ1xcbicpO1xuICByZXR1cm4gcnVsZXMubWFwKHJ1bGUgPT4ge1xuICAgIGNvbnN0IHRlc3RJZFRvUnVuID0gT2JqZWN0LnZhbHVlcyhUZXN0cykuZmluZChcbiAgICAgIHRlc3RJZCA9PiBUZXN0c1JlZ2V4W3Rlc3RJZF0udGVzdChydWxlKVxuICAgICk7XG5cbiAgICBpZiAoIXRlc3RJZFRvUnVuKSB7XG4gICAgICB0aHJvdyAnVW5rbm93biB0ZXN0ZXI6ICcgKyBydWxlO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0ZXN0SWRUb1J1bixcbiAgICAgIHBhcmFtczogcnVsZS5tYXRjaChUZXN0c1JlZ2V4W3Rlc3RJZFRvUnVuXSkuc3BsaWNlKDEpXG4gICAgfVxuICB9KTtcbn1cblxuY29uc3QgcnVuUnVsZSA9IChpbnB1dFZhbHVlLCBydWxlcywgcnVsZSwgZGVwdGggPSAwKSA9PiB7XG4gIGlmIChkZXB0aCA9PT0gMTApIHtcbiAgICB0aHJvdyAnUnVsZSBleGVjdXRpb24gbG9vcCBkZXRlY3RlZC4gSW50ZXJydXB0aW5nJztcbiAgfVxuXG4gIGlmIChydWxlLnRlc3RJZFRvUnVuID09PSBUZXN0cy5QQVNTKSB7XG4gICAgY29uc3QgcnVsZVRvUnVuQmVmb3JlID0gcnVsZXMuZmluZChydWxlID0+IHJ1bGUubmFtZSA9PT0gcnVsZS5wYXJhbXNbMF0pO1xuXG4gICAgaWYgKCFydWxlVG9SdW5CZWZvcmUpIHtcbiAgICAgIHRocm93ICdSdWxlIG5vdCBmb3VuZDogJyArIHJ1bGUucGFyYW1bMF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHJ1blJ1bGUoaW5wdXRWYWx1ZSwgcnVsZXMsIHJ1bGVUb1J1bkJlZm9yZSwgZGVwdGgrKylcbiAgfVxuXG4gIHJldHVybiBydWxlLmxpbmVzKGxpbmUgPT4gVGVzdHNGdW5jdGlvbnNbbGluZS50ZXN0SWRUb1J1bl0oaW5wdXRWYWx1ZSwgLi4ubGluZS5wYXJhbXMpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNvbnN0cnVjdFJ1bGUsXG4gIHJ1blJ1bGVcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2\n")},function(module,exports,__webpack_require__){eval("const {trimStr} = __webpack_require__(0);\n\nconst RUN_COMMAND = /^run ([a-zA-Z0-9]+)$/;\nconst TEST_COMMAND = /^testif ([a-zA-Z0-9]+) ([a-zA-Z0-9]+)$/\n\nconst constructValidator = (rules, body) => {\n  const lines = trimStr(body).split('\\n');\n\n  return lines.map(line => {\n    const sanitizedLine = trimStr(line);\n\n    if (TEST_COMMAND.test(sanitizedLine)) {\n      const [all, fieldName, ruleName] = sanitizedLine.match(TEST_COMMAND),\n            ruleToRun = rules.find(rule => rule.name === ruleName);\n\n      if (!ruleToRun) {\n        throw 'Rule not found: ' + ruleName;\n      }\n\n      return {\n        type: 'test',\n        fieldName,\n        ruleToRun\n      }\n    }\n    else if (RUN_COMMAND.test(sanitizedLine)) {\n      const [all, validatorName] = sanitizedLine.match(RUN_COMMAND);\n\n      return {\n        type: 'run',\n        validatorName\n      }\n    }\n  });\n};\n\nconst runValidator = (validators, validatorName, depth = 0) => {\n  const validator = validators.find(validator => validator.name === validatorName);\n\n  if (!validator) {\n    throw 'Validator not found: ' + validatorName;\n  }\n\n  return validator.lines.map(validatorLine => {\n    if (validatorLine.type === 'test') {\n      return {\n        ruleToRun: validatorLine.ruleToRun,\n        fieldName: validatorLine.fieldName\n      };\n    }\n    else if (validatorLine.type === 'run') {\n      // run dependant validator\n\n      const validatorToRun = validators.find(validator => validator.name === validatorLine.validatorName);\n\n      if (!validatorToRun) {\n        throw 'Validator not found: ' + validatorLine.validatorName;\n      }\n\n      return runValidator(validators, validatorLine.validatorName, depth++);\n    }\n  })\n}\n\nmodule.exports = {\n  constructValidator,\n  runValidator\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy92YWxpZGF0b3JzLmpzP2FhMDIiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qge3RyaW1TdHJ9ID0gcmVxdWlyZSgnLi9oZWxwZXJzJyk7XG5cbmNvbnN0IFJVTl9DT01NQU5EID0gL15ydW4gKFthLXpBLVowLTldKykkLztcbmNvbnN0IFRFU1RfQ09NTUFORCA9IC9edGVzdGlmIChbYS16QS1aMC05XSspIChbYS16QS1aMC05XSspJC9cblxuY29uc3QgY29uc3RydWN0VmFsaWRhdG9yID0gKHJ1bGVzLCBib2R5KSA9PiB7XG4gIGNvbnN0IGxpbmVzID0gdHJpbVN0cihib2R5KS5zcGxpdCgnXFxuJyk7XG5cbiAgcmV0dXJuIGxpbmVzLm1hcChsaW5lID0+IHtcbiAgICBjb25zdCBzYW5pdGl6ZWRMaW5lID0gdHJpbVN0cihsaW5lKTtcblxuICAgIGlmIChURVNUX0NPTU1BTkQudGVzdChzYW5pdGl6ZWRMaW5lKSkge1xuICAgICAgY29uc3QgW2FsbCwgZmllbGROYW1lLCBydWxlTmFtZV0gPSBzYW5pdGl6ZWRMaW5lLm1hdGNoKFRFU1RfQ09NTUFORCksXG4gICAgICAgICAgICBydWxlVG9SdW4gPSBydWxlcy5maW5kKHJ1bGUgPT4gcnVsZS5uYW1lID09PSBydWxlTmFtZSk7XG5cbiAgICAgIGlmICghcnVsZVRvUnVuKSB7XG4gICAgICAgIHRocm93ICdSdWxlIG5vdCBmb3VuZDogJyArIHJ1bGVOYW1lO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAndGVzdCcsXG4gICAgICAgIGZpZWxkTmFtZSxcbiAgICAgICAgcnVsZVRvUnVuXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKFJVTl9DT01NQU5ELnRlc3Qoc2FuaXRpemVkTGluZSkpIHtcbiAgICAgIGNvbnN0IFthbGwsIHZhbGlkYXRvck5hbWVdID0gc2FuaXRpemVkTGluZS5tYXRjaChSVU5fQ09NTUFORCk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdydW4nLFxuICAgICAgICB2YWxpZGF0b3JOYW1lXG4gICAgICB9XG4gICAgfVxuICB9KTtcbn07XG5cbmNvbnN0IHJ1blZhbGlkYXRvciA9ICh2YWxpZGF0b3JzLCB2YWxpZGF0b3JOYW1lLCBkZXB0aCA9IDApID0+IHtcbiAgY29uc3QgdmFsaWRhdG9yID0gdmFsaWRhdG9ycy5maW5kKHZhbGlkYXRvciA9PiB2YWxpZGF0b3IubmFtZSA9PT0gdmFsaWRhdG9yTmFtZSk7XG5cbiAgaWYgKCF2YWxpZGF0b3IpIHtcbiAgICB0aHJvdyAnVmFsaWRhdG9yIG5vdCBmb3VuZDogJyArIHZhbGlkYXRvck5hbWU7XG4gIH1cblxuICByZXR1cm4gdmFsaWRhdG9yLmxpbmVzLm1hcCh2YWxpZGF0b3JMaW5lID0+IHtcbiAgICBpZiAodmFsaWRhdG9yTGluZS50eXBlID09PSAndGVzdCcpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJ1bGVUb1J1bjogdmFsaWRhdG9yTGluZS5ydWxlVG9SdW4sXG4gICAgICAgIGZpZWxkTmFtZTogdmFsaWRhdG9yTGluZS5maWVsZE5hbWVcbiAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHZhbGlkYXRvckxpbmUudHlwZSA9PT0gJ3J1bicpIHtcbiAgICAgIC8vIHJ1biBkZXBlbmRhbnQgdmFsaWRhdG9yXG5cbiAgICAgIGNvbnN0IHZhbGlkYXRvclRvUnVuID0gdmFsaWRhdG9ycy5maW5kKHZhbGlkYXRvciA9PiB2YWxpZGF0b3IubmFtZSA9PT0gdmFsaWRhdG9yTGluZS52YWxpZGF0b3JOYW1lKTtcblxuICAgICAgaWYgKCF2YWxpZGF0b3JUb1J1bikge1xuICAgICAgICB0aHJvdyAnVmFsaWRhdG9yIG5vdCBmb3VuZDogJyArIHZhbGlkYXRvckxpbmUudmFsaWRhdG9yTmFtZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJ1blZhbGlkYXRvcih2YWxpZGF0b3JzLCB2YWxpZGF0b3JMaW5lLnZhbGlkYXRvck5hbWUsIGRlcHRoKyspO1xuICAgIH1cbiAgfSlcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNvbnN0cnVjdFZhbGlkYXRvcixcbiAgcnVuVmFsaWRhdG9yXG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///3\n")}]);